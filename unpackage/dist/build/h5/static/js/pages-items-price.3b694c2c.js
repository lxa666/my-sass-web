(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-items-price"],{"06c5":function(t,e,i){"use strict";i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=a(i("6b75"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(t){if("string"===typeof t)return(0,n.default)(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,n.default)(t,e):void 0}}},"23fa":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticStyle:{"background-image":"linear-gradient(to right, #368dfe , #56b7fe)"}},[i("v-uni-view",{staticClass:"cu-bar search ",staticStyle:{"padding-top":"30rpx"}},[i("v-uni-view",{staticClass:"search-form round",staticStyle:{"background-color":"#FFF"}},[i("v-uni-text",{staticClass:"cuIcon-search"}),i("v-uni-input",{attrs:{"adjust-position":!1,type:"text",placeholder:"请输入手机号搜索账户","confirm-type":"search"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t.mobile?i("v-uni-text",{staticClass:"cuIcon-close text-bold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}):t._e()],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn  shadow-blur round",staticStyle:{"background-color":"#FF5733",color:"#FFF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.init(t.mobile)}}},[t._v("搜索")])],1)],1),i("v-uni-view",{staticClass:"flex margin-top",staticStyle:{"align-items":"flex-end",padding:"30rpx","border-bottom":"1px solid #e5e5e5"}},[i("v-uni-view",[i("v-uni-image",{staticStyle:{width:"120rpx",height:"120rpx","border-radius":"20rpx"},attrs:{src:t.itemInfo.brandLogo}})],1),i("v-uni-view",{staticStyle:{"margin-left":"12rpx",flex:"1","font-weight":"bold","padding-bottom":"12rpx"}},[i("v-uni-view",{staticStyle:{color:"#FFF"}},[t._v(t._s(t.itemInfo.activityName))]),i("v-uni-view",{staticStyle:{display:"flex","align-items":"flex-end","font-size":"28rpx",color:"#FFF"}},[t._v("当前结算价"),i("span",{staticStyle:{padding:"12rpx 24rpx","border-radius":"10rpx","background-color":"#f0f5f6",margin:"0 12rpx",color:"#ff5733","font-weight":"bold","font-size":"36rpx"}},[t._v(t._s(t.itemInfo.highPrice/100))]),t._v("元")])],1),t.recordsList.length?i("v-uni-view",{staticStyle:{"padding-bottom":"12rpx"}},[i("v-uni-button",{staticStyle:{height:"56rpx",width:"176rpx",color:"#ff5733","font-size":"24rpx","border-radius":"56rpx","box-shadow":"0px 2px 6px 0px #2a82e4"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.allEdit.apply(void 0,arguments)}}},[t._v(t._s(t.batchEdit?"取消编辑":"批量修改"))])],1):t._e()],1)],1),t.batchEdit?i("v-uni-view",[i("v-uni-view",{staticClass:"flex",staticStyle:{"justify-content":"flex-end","padding-right":"30rpx","margin-top":"20rpx"}},[i("v-uni-checkbox-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.allcheckboxChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"background-color":"#FFF",padding:"12rpx 24rpx","border-radius":"20rpx"}},[t._v("全选"),i("v-uni-checkbox",{staticClass:"round",class:t.allStatus?"checked":"",staticStyle:{"padding-left":"12rpx","font-size":"32rpx",transform:"scale(0.7)"},attrs:{checked:!!t.allStatus,value:"true"}})],1)],1)],1),i("v-uni-view",{staticStyle:{position:"fixed",bottom:"0",width:"100vw",padding:"30rpx"}},[i("v-uni-view",{staticClass:"animation-slide-bottom"},[i("v-uni-button",{staticStyle:{"background-color":"#ff5733",color:"#FFF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setChecked.apply(void 0,arguments)}}},[t._v("确认选择")])],1)],1)],1):t._e(),t.recordsList.length?i("v-uni-view",t._l(t.recordsList,(function(e,n){return i("v-uni-view",{key:e.id,staticClass:"search bg-white",staticStyle:{"border-radius":"20rpx",margin:"24rpx 30rpx",padding:"24rpx","line-height":"60rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.topage("/pages/items/agent",e)}}},[i("v-uni-view",{staticClass:"flex",staticStyle:{"justify-content":"space-between"}},[i("v-uni-view",{staticClass:"flex"},[i("v-uni-view",{staticStyle:{"font-size":"28rpx",color:"#505050","font-weight":"600"}},[t._v(t._s(e.agentName)+t._s(e.remarkName?"("+e.remarkName+")":""))]),t.batchEdit?t._e():i("v-uni-view",{staticClass:"margin-left",staticStyle:{color:"#FF5733"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.showRemarkname(e)}}},[t._v("修改备注")])],1),t.batchEdit?i("v-uni-view",{on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-checkbox-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),function(e){t.checkboxChange(e,n)}.apply(void 0,arguments)}}},[i("v-uni-checkbox",{staticClass:"round",class:e.checked?"checked":"",staticStyle:{"font-size":"32rpx",transform:"scale(0.7)"},attrs:{checked:!!e.checked,value:e.userId}})],1)],1):t._e()],1),i("v-uni-view",{staticClass:"flex",staticStyle:{"align-items":"center"}},[i("v-uni-view",{staticStyle:{flex:"1"}},[i("v-uni-view",[t._v("结算价格："+t._s(t.setDataFn(e.commissionRatio))+"元")]),i("v-uni-view",[t._v("团队人数："+t._s(e.myTeamNum))])],1),t.batchEdit?t._e():i("v-uni-view",[i("v-uni-view",{staticStyle:{height:"48rpx","line-height":"48rpx",color:"#ff5733","font-size":"24rpx",border:"1px solid #ff5733","text-align":"center","border-radius":"10rpx"}},[t._v("抽成比例"+t._s(e.commissionRatio)+"%")]),i("v-uni-button",{staticClass:"margin-top",staticStyle:{background:"#FF5733",color:"#fff"},attrs:{size:"mini"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.actionShow(e.userId)}}},[t._v("修改价格")])],1)],1)],1)})),1):i("v-uni-view",[i("v-uni-view",{staticStyle:{"text-align":"center",padding:"24rpx"}},[t._v("--暂无数据--")])],1),i("v-uni-view",{staticClass:"cu-modal",class:t.userId?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("修改抽成比例")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"padding-xl",staticStyle:{"font-weight":"600"}},[i("v-uni-view",{staticStyle:{"text-align":"left","margin-bottom":"6rpx"}},[t._v("抽成比例")]),i("v-uni-view",{staticClass:"flex",staticStyle:{"align-items":"center"}},[i("v-uni-input",{staticStyle:{"border-radius":"20rpx","margin-right":"12rpx","background-color":"#FFF",height:"70rpx",width:"200rpx"},attrs:{type:"number",placeholder:"",name:"input"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.subrateFn.apply(void 0,arguments)}},model:{value:t.subrate,callback:function(e){t.subrate=e},expression:"subrate"}}),t._v("%"),i("span",{staticStyle:{"font-size":"20rpx",color:"#ff5733"}},[t._v("(上限"+t._s(t.TeamRate)+"%)")])],1)],1),i("v-uni-view",{staticClass:"padding-xl",staticStyle:{"font-weight":"600"}},[i("v-uni-view",{staticStyle:{"text-align":"left","margin-bottom":"6rpx"}},[t._v("结算价格")]),i("v-uni-view",{staticClass:"flex",staticStyle:{"align-items":"center"}},[i("v-uni-input",{staticStyle:{"border-radius":"20rpx","margin-right":"12rpx","background-color":"#FFF",height:"70rpx",width:"200rpx"},attrs:{type:"number",placeholder:"",name:"input"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.priceFn.apply(void 0,arguments)}},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),t._v("元/单"),i("span",{staticStyle:{"font-size":"20rpx",color:"#ff5733"}},[t._v("(上限"+t._s(t.keepTwoDecimalFull(t.itemInfo.highPrice))+"元)")])],1)],1),i("v-uni-view",{staticClass:"cu-bar bg-white justify-center"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn bg-green margin-left",staticStyle:{"background-color":"#FF5733"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.posteditrate(t.subrate)}}},[t._v("确认修改")])],1)],1)],1)],1),i("Remarkname",{attrs:{relAgentId:t.relAgentId,hideRemarkname:t.hideRemarkname}})],1)},r=[]},2909:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n=s(i("6005")),a=s(i("db90")),r=s(i("06c5")),o=s(i("3427"));function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return(0,n.default)(t)||(0,a.default)(t)||(0,r.default)(t)||(0,o.default)()}},"2b80":function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5530")),r=i("2f62"),o={props:{relAgentId:{type:String,default:!1},hideRemarkname:{type:Function,default:null}},data:function(){return{remarkName:""}},computed:(0,a.default)({},(0,r.mapState)({itemInfo:function(t){return t.itemsStore.itemInfo}})),methods:{hideModal:function(){this.hideRemarkname()},setData:function(){var t=this;this.remarkName?this.api.postremarkname({data:{remarkName:this.remarkName,userId:this.relAgentId},success:function(e){t.remarkName="",t.hideModal()}}):uni.showToast({title:"备注名称不可为空",icon:"none",duration:2e3})}}};e.default=o},3427:function(t,e,i){"use strict";function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"3ef4":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"cu-modal",class:t.relAgentId?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("修改备注")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"padding-xl",staticStyle:{"font-weight":"600"}},[i("v-uni-view",{staticClass:"flex",staticStyle:{"align-items":"center","justify-content":"center","min-height":"200rpx"}},[i("v-uni-input",{staticStyle:{"border-radius":"20rpx","margin-right":"12rpx","background-color":"#FFF",height:"70rpx",width:"400rpx"},attrs:{placeholder:"",name:"input"},model:{value:t.remarkName,callback:function(e){t.remarkName=e},expression:"remarkName"}})],1)],1),i("v-uni-view",{staticClass:"cu-bar bg-white justify-center"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn bg-green margin-left",staticStyle:{"background-color":"#FF5733"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setData.apply(void 0,arguments)}}},[t._v("确认修改")])],1)],1)],1)],1)},r=[]},6005:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=a(i("6b75"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t))return(0,n.default)(t)}},6089:function(t,e,i){"use strict";var n=i("4ea4");i("c975"),i("d81d"),i("a9e3"),i("b680"),i("d3b7"),i("acd8"),i("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2909")),r=n(i("5530")),o=i("2f62"),s=i("282b"),c=n(i("f360")),u={components:{Remarkname:c.default},data:function(){return{TeamRate:s.TeamRate,batchEdit:!1,allStatus:!1,recordsList:[],teamNum:"",userId:"",subrate:"",price:"",mobile:"",relAgentId:""}},onLoad:function(t){},computed:(0,r.default)({},(0,o.mapState)({itemInfo:function(t){return t.itemsStore.itemInfo}})),onPullDownRefresh:function(){this.init(),uni.stopPullDownRefresh()},onShow:function(){console.log("itemInfo",this.itemInfo)},mounted:function(){console.log(333,this.itemInfo),this.init()},methods:(0,r.default)((0,r.default)({},(0,o.mapMutations)(["itemPriceInfo"])),{},{keepTwoDecimalFull:function(t){t/=100;var e=parseFloat(t);if(isNaN(e))return!1;e=Math.floor(100*t)/100;var i=e.toString(),n=i.indexOf(".");n<0&&(n=i.length,i+=".");while(i.length<=n+2)i+="0";return i},hideRemarkname:function(){this.relAgentId="",this.init()},showRemarkname:function(t){this.relAgentId=t.userId},setChecked:function(){var t="";this.recordsList.map((function(e,i){e.checked&&(t&&(t+=","),t+=e.checked)})),this.userId=t,console.log("userId",t)},allcheckboxChange:function(t){this.recordsList.map((function(e){e.checked=t.detail.value[0]?e.userId:null})),this.allStatus=!!t.detail.value[0],console.log(this.recordsList)},checkboxChange:function(t,e){var i=t.detail.value[0],n=this.recordsList;n[e].checked=i||null,this.recordsList=(0,a.default)(n)},topage:function(t,e){e&&this.itemPriceInfo(e),this.batchEdit||uni.navigateTo({url:t+"?userId="+e.userId})},close:function(){this.mobile="",this.init()},allEdit:function(){this.batchEdit=!this.batchEdit},subrateFn:function(t){console.log(t.target.value),this.price=this.setDataFn(t.target.value>10?10:t.target.value)},priceFn:function(t){console.log(t.target.value);var e=this.itemInfo.highPrice/100,i=((e-t.target.value)/e*100).toFixed(1);i<0&&(i=0),this.subrate=i},setDataFn:function(t){var e=this.itemInfo.highPrice;return this.keepTwoDecimalFull(e-e*t/100)},hideModal:function(){this.userId="",this.subrate=""},actionShow:function(t){this.price="",this.subrate="",console.log("id",t),this.userId=t},posteditrate:function(){var t=this;if(isNaN(this.subrate))return uni.showToast({title:"不可以填写非数，请修改后提交",icon:"none",duration:2e3}),!0;if(this.subrate>s.TeamRate)uni.showToast({title:"可调整的最大比例为"+s.TeamRate+"%请修改后再提交",icon:"none",duration:2e3});else if(this.subrate<0)uni.showToast({title:"可调整的最小比例为0%请修改后再提交",icon:"none",duration:2e3});else{var e=this.subrate;0===e||e?(e=Number(e),e=Math.floor(100*e)/100,this.api.posteditrate({data:{rate:e,userIds:this.userId,activityId:this.itemInfo.id},success:function(e){t.subrate="",t.userId="",t.batchEdit=!1,t.allStatus=!1,t.init()}})):console.log("异常")}},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.api.getagentlist({data:{activityId:this.itemInfo.id,agentMobile:e},success:function(e){t.recordsList=e.data.data.pages,console.log("this.recordsList",t.recordsList),t.teamNum=e.data.data.teamNum}})}})};e.default=u},"6b75":function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},bcfd:function(t,e,i){"use strict";i.r(e);var n=i("2b80"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},d563:function(t,e,i){"use strict";i.r(e);var n=i("23fa"),a=i("f9e7");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var o,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"7dadc5d9",null,!1,n["a"],o);e["default"]=c.exports},db90:function(t,e,i){"use strict";function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},f360:function(t,e,i){"use strict";i.r(e);var n=i("3ef4"),a=i("bcfd");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var o,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"de7c7ffc",null,!1,n["a"],o);e["default"]=c.exports},f9e7:function(t,e,i){"use strict";i.r(e);var n=i("6089"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a}}]);