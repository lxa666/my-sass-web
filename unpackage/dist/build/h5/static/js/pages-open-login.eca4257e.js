(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-open-login"],{"08df":function(t,e,n){"use strict";var a=n("61e3"),i=n.n(a);i.a},"298c":function(t,e,n){"use strict";n.r(e);var a=n("ae41"),i=n("fd93");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("08df");var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"f1537610",null,!1,a["a"],r);e["default"]=u.exports},4906:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".form-item[data-v-f1537610]{border-radius:%?60?%;box-shadow:0 7px 7px 0 hsla(0,0%,60%,.1)}",""]),t.exports=e},"61e3":function(t,e,n){var a=n("4906");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("a9553266",a,!0,{sourceMap:!1,shadowMode:!1})},ae41:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticStyle:{padding:"100rpx"}},[a("v-uni-view",{staticStyle:{display:"flex","justify-content":"center"}},[a("v-uni-view",{staticStyle:{margin:"30rpx auto",display:"inline-block",background:"#fff","border-radius":"50%"}},[a("v-uni-image",{staticStyle:{padding:"60rpx 50rpx",width:"300rpx",height:"290rpx"},attrs:{src:n("83b8")}})],1)],1),a("v-uni-view",{staticClass:"flex",staticStyle:{"align-items":"center","justify-content":"center"}},[a("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)},reset:function(e){arguments[0]=e=t.$handleEvent(e),t.formReset.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"margin-top cu-form-group form-item"},[a("v-uni-view",{staticClass:"title"},[t._v("账号")]),a("v-uni-input",{attrs:{type:"number",placeholder:"请输入注册手机号",name:"mobile"}})],1),a("v-uni-view",{staticClass:"margin-top cu-form-group form-item"},[a("v-uni-view",{staticClass:"title"},[t._v("密码")]),a("v-uni-input",{attrs:{password:!0,placeholder:"请输入密码",name:"password"}})],1),a("v-uni-button",{staticClass:"margin-top cu-btn block bg-green margin-tb-sm lg lg-border",staticStyle:{"border-radius":"60rpx","margin-top":"40rpx",background:"#FF5733"},attrs:{"form-type":"submit"}},[t.loading?a("v-uni-text",{staticClass:"cuIcon-loading2 cuIconfont-spin"}):t._e(),t._v("一键登录")],1),a("v-uni-view",{staticStyle:{"margin-top":"40rpx","text-align":"center",color:"#FF5733"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.topage("/pages/open/reg")}}},[t._v("没有账号？前往注册")]),a("v-uni-view",{staticStyle:{"margin-top":"40rpx","text-align":"center",color:"#FF5733"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.topage("/pages/user/resetPsw")}}},[t._v("重置密码")])],1)],1)],1)},o=[]},d80e:function(t,e,n){"use strict";var a=n("4ea4");n("99af"),n("ac1f"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("282b"),o=a(n("c78f")),r=(a(n("7aab")),function(t){var e=window.location.href.split("?")[1];if(!e)return null;for(var n=e.split("&"),a=0;a<n.length;a++){var i=n[a].split("=");if(i[0]==t)return i[1]}return null}),c=function(t){o.default.getaccesstoken({data:{code:t,appid:i.AppId},success:function(t){t.data.data.openId&&uni.setStorageSync("openIdNew",t.data.data.openId)}})},u=function(){if(!uni.getStorageSync("openIdNew")){var t=r("code")||null;if(t)c(t);else{var e=function(){uni.setStorageSync("errNum","获取code判断--登录成功--回收");var t=encodeURIComponent(window.location.href),e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(i.AppId,"&scope=snsapi_base&redirect_uri=").concat(t,"&response_type=code&state=STATE#wechat_redirect");window.location.href=e},n=uni.getStorageSync("errNum")||!1;n||e()}}},s={getWxCode:u};e.default=s},f856:function(t,e,n){"use strict";var a=n("4ea4");n("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5530")),o=(a(n("b1c2")),a(n("4167"))),r=a(n("d80e")),c=n("2f62"),u=(n("282b"),{data:function(){return{codeUrl:"../../static/tabbar/component_cur.png",codeKey:"",modalName:null}},computed:(0,i.default)({},(0,c.mapState)({loading:function(t){return t.publicStore.loading}})),created:function(){},onShow:function(){var t=window.navigator.userAgent;t.indexOf("MicroMessenger")>0&&r.default.getWxCode((function(t){console.log("获取code")}))},methods:(0,i.default)((0,i.default)({},(0,c.mapMutations)(["setactivitylist"])),{},{topage:function(t){uni.navigateTo({url:t})},getCode:function(){var t=this;uni.request({url:"http://192.168.9.146:8080/blade-auth/oauth/captcha",method:"GET",data:{},header:{},success:function(e){e.data.image&&(t.codeUrl=e.data.image,t.codeKey=e.data.key)}})},formSubmit:function(t){var e=this,n=t.detail.value;if(n.password||n.mobile){n.password=(0,o.default)(n.password),n.tenantId=this.tenantId;var a=uni.getStorageSync("openIdNew");a&&(n.openId=a),this.api.postlogin({data:(0,i.default)({},n),success:function(t){console.log("sss2",t),t.data.refresh_token?(e.setactivitylist([]),uni.setStorageSync("refresh_token",t.data.refresh_token),uni.setStorageSync("access_token",t.data.access_token),uni.setStorageSync("setUserLogin",n),uni.removeStorageSync("userdetail"),uni.removeStorageSync("errNum"),uni.reLaunch({url:"/pages/index/index"})):uni.showToast({title:t.data.error_description,icon:"none",duration:3e3})}})}else uni.showToast({title:"账号、密码不可为空",icon:"none",duration:3e3})}})});e.default=u},fd93:function(t,e,n){"use strict";n.r(e);var a=n("f856"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a}}]);